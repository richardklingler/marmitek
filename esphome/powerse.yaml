esphome:
  name: powerse_1
  platform: ESP8266
  board: esp12e

wifi:
  ssid: "MyWiFiSSID"
  password: "MyWiFiPassword"

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Power SE 1 Fallback Hotspot"
    password: "zSbBqdCUYJm7"

captive_portal:

# Enable logging
logger:

# Enable Home Assistant API
api:

ota:

switch:
  # We use GPIO5 as the positive driven output for the relay
  - platform: gpio
    name: "WiFi Plug Relay"
    pin: 5
    icon: "mdi:power-socket-fr"
    id: powerse_relay
    # Switch on/off the LED output as well
    on_turn_on:
      - switch.turn_on: powerse_led
    on_turn_off:
      - switch.turn_off: powerse_led
  # Use GPIO4 for driving the orange LEDs, but active low
  - platform: gpio
    id: powerse_led
    pin:
      number: 4
      inverted: yes
binary_sensor:
  # The push button is connected to GPIO2 but active low
  - platform: gpio
    pin:
      number: 2
      inverted: yes
    name: "WiFi Plug Button"
    filters:
      - delayed_on: 20ms
    # We also need to switch the relay output accordingly
    on_press:
      then:
        - switch.toggle: powerse_relay
